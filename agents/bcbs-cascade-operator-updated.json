{
  "agent_metadata": {
    "agent_id": "bcbs-cascade-operator-v2.0",
    "agent_name": "BCBS Cascade Operator",
    "agent_version": "2.0.0",
    "agent_type": "orchestrator",
    "description": "Orchestrates workflows and communication between BCBS valuation system agents",
    "created_at": "2025-03-31T12:00:00Z",
    "updated_at": "2025-03-31T12:00:00Z",
    "maintainer": "BCBS Values Engineering Team"
  },
  
  "communication_protocol": {
    "protocol_version": "1.2.0",
    "message_format": {
      "header": {
        "message_id": "UUID string - Unique identifier for each message",
        "source_agent_id": "ID of the sending agent",
        "target_agent_id": "ID of the receiving agent (or 'broadcast' for all)",
        "message_type": "Command, Status, Error, Data, Calibration, etc.",
        "priority": "Integer 1-5, where 1 is highest priority",
        "timestamp": "ISO-8601 UTC timestamp of message creation",
        "correlation_id": "Optional ID linking related messages in a workflow",
        "reply_to": "Optional message_id this message is responding to"
      },
      "body": {
        "content": "The main payload of the message",
        "format": "Payload format (JSON, binary, text, etc.)",
        "schema_version": "Version of the schema used for content validation",
        "encryption": {
          "enabled": "Boolean indicating if payload is encrypted",
          "algorithm": "Encryption algorithm used if enabled",
          "key_id": "Reference to the key used for encryption"
        }
      },
      "metadata": {
        "tags": "Array of contextual tags for message categorization",
        "ttl": "Time-to-live in seconds before message expires",
        "retry_count": "Number of delivery attempts made",
        "trace_id": "Distributed tracing identifier for request path"
      }
    },
    "delivery_guarantees": {
      "acknowledgment_required": true,
      "delivery_timeout": 30000,
      "max_retries": 3,
      "retry_strategy": "exponential_backoff"
    },
    "rate_limits": {
      "messages_per_second": 100,
      "burst_capacity": 500
    }
  },
  
  "calibration_protocol": {
    "calibration_interval": 3600,
    "calibration_data_format": {
      "model_version": "Version of the valuation model being calibrated",
      "training_metrics": {
        "r2_score": "R-squared metric from training",
        "rmse": "Root mean squared error",
        "mae": "Mean absolute error",
        "cross_validation_scores": "Array of cross-validation scores"
      },
      "feature_importance": {
        "bedrooms": "Importance weight of bedrooms feature",
        "bathrooms": "Importance weight of bathrooms feature",
        "square_feet": "Importance weight of square footage feature",
        "lot_size": "Importance weight of lot size feature",
        "year_built": "Importance weight of year built feature",
        "neighborhood": "Importance weight of neighborhood feature",
        "latitude": "Importance weight of latitude feature",
        "longitude": "Importance weight of longitude feature",
        "proximity_features": "Importance weight of proximity features"
      },
      "calibration_properties": [
        "Array of property IDs used for calibration"
      ],
      "hyperparameters": {
        "learning_rate": "Learning rate for gradient boosting models",
        "max_depth": "Maximum tree depth for tree-based models",
        "num_leaves": "Number of leaves for LightGBM",
        "n_estimators": "Number of estimators for ensemble models",
        "alpha": "Alpha parameter for regularization models",
        "l1_ratio": "L1 ratio for ElasticNet"
      }
    }
  },
  
  "workflow_orchestration": {
    "workflow_definitions": [
      {
        "workflow_id": "standard_valuation",
        "description": "Standard property valuation workflow",
        "trigger": {
          "type": "api_request",
          "endpoint": "/api/valuation"
        },
        "steps": [
          {
            "step_id": "data_validation",
            "agent_id": "bcbs-tdd-validator",
            "action": "validate_property_data",
            "timeout": 5000,
            "retry_count": 2,
            "on_failure": "abort_workflow"
          },
          {
            "step_id": "gis_enhancement",
            "agent_id": "bcbs-bootstrap-commander",
            "action": "enhance_with_gis",
            "timeout": 10000,
            "retry_count": 1,
            "on_failure": "continue_workflow"
          },
          {
            "step_id": "model_selection",
            "agent_id": "god-tier-builder",
            "action": "select_optimal_model",
            "timeout": 5000,
            "retry_count": 1,
            "on_failure": "use_default_model"
          },
          {
            "step_id": "valuation_execution",
            "agent_id": "god-tier-builder",
            "action": "execute_valuation",
            "timeout": 15000,
            "retry_count": 2,
            "on_failure": "abort_workflow"
          },
          {
            "step_id": "result_validation",
            "agent_id": "bcbs-tdd-validator",
            "action": "validate_valuation_result",
            "timeout": 5000,
            "retry_count": 1,
            "on_failure": "flag_for_review"
          }
        ]
      },
      {
        "workflow_id": "model_training",
        "description": "Periodic model training and update workflow",
        "trigger": {
          "type": "schedule",
          "cron": "0 2 * * 0"
        },
        "steps": [
          {
            "step_id": "data_collection",
            "agent_id": "bcbs-bootstrap-commander",
            "action": "collect_training_data",
            "timeout": 60000,
            "retry_count": 3,
            "on_failure": "notify_admin"
          },
          {
            "step_id": "data_preprocessing",
            "agent_id": "bcbs-tdd-validator",
            "action": "preprocess_training_data",
            "timeout": 120000,
            "retry_count": 2,
            "on_failure": "abort_workflow"
          },
          {
            "step_id": "model_training",
            "agent_id": "god-tier-builder",
            "action": "train_models",
            "timeout": 3600000,
            "retry_count": 1,
            "on_failure": "abort_workflow"
          },
          {
            "step_id": "model_evaluation",
            "agent_id": "bcbs-tdd-validator",
            "action": "evaluate_models",
            "timeout": 120000,
            "retry_count": 1,
            "on_failure": "abort_workflow"
          },
          {
            "step_id": "model_deployment",
            "agent_id": "bcbs-bootstrap-commander",
            "action": "deploy_best_model",
            "timeout": 60000,
            "retry_count": 2,
            "on_failure": "notify_admin"
          }
        ]
      }
    ],
    
    "agent_capabilities": {
      "bcbs-bootstrap-commander": {
        "capabilities": [
          "data_preparation",
          "gis_enrichment",
          "model_deployment",
          "system_initialization"
        ],
        "resource_limits": {
          "max_memory": "2GB",
          "max_cpu": 2,
          "max_concurrent_tasks": 5
        }
      },
      "god-tier-builder": {
        "capabilities": [
          "model_training",
          "model_selection",
          "valuation_execution",
          "advanced_analytics"
        ],
        "resource_limits": {
          "max_memory": "8GB",
          "max_cpu": 4,
          "max_concurrent_tasks": 3
        }
      },
      "bcbs-tdd-validator": {
        "capabilities": [
          "data_validation",
          "result_validation",
          "test_execution",
          "quality_assurance"
        ],
        "resource_limits": {
          "max_memory": "1GB",
          "max_cpu": 1,
          "max_concurrent_tasks": 10
        }
      }
    },
    
    "error_handling": {
      "severity_levels": {
        "critical": {
          "description": "Errors that cause system failure or data corruption",
          "actions": ["alert_admin", "abort_workflow", "log_detailed_diagnostics"]
        },
        "error": {
          "description": "Errors that prevent a workflow from completing successfully",
          "actions": ["retry_step", "attempt_fallback", "log_error"]
        },
        "warning": {
          "description": "Issues that may affect accuracy but don't prevent completion",
          "actions": ["log_warning", "continue_workflow", "flag_for_review"]
        },
        "info": {
          "description": "Informational messages about normal operation",
          "actions": ["log_info"]
        }
      },
      "error_codes": {
        "VALIDATION_ERROR": {
          "code": "VAL-001",
          "severity": "error",
          "description": "Input data validation failed"
        },
        "MODEL_ERROR": {
          "code": "MDL-001",
          "severity": "error",
          "description": "Model execution failed"
        },
        "GIS_UNAVAILABLE": {
          "code": "GIS-001",
          "severity": "warning",
          "description": "GIS enhancement unavailable"
        },
        "DEPENDENCY_UNAVAILABLE": {
          "code": "DEP-001",
          "severity": "critical",
          "description": "Required dependency unavailable"
        },
        "DATA_INCONSISTENCY": {
          "code": "DAT-001",
          "severity": "warning",
          "description": "Data inconsistency detected"
        }
      }
    }
  },
  
  "message_examples": {
    "command_example": {
      "header": {
        "message_id": "cmd-123e4567-e89b-12d3-a456-426614174000",
        "source_agent_id": "bcbs-cascade-operator-v2.0",
        "target_agent_id": "god-tier-builder",
        "message_type": "Command",
        "priority": 2,
        "timestamp": "2025-03-31T12:05:23Z",
        "correlation_id": "workflow-7890"
      },
      "body": {
        "content": {
          "command": "execute_valuation",
          "parameters": {
            "property_id": "PROP-AB12CD34",
            "valuation_method": "enhanced_regression",
            "include_gis_features": true
          }
        },
        "format": "JSON",
        "schema_version": "1.0.0",
        "encryption": {
          "enabled": false
        }
      },
      "metadata": {
        "tags": ["valuation", "production"],
        "ttl": 30,
        "retry_count": 0,
        "trace_id": "trace-9876543210"
      }
    },
    "status_update_example": {
      "header": {
        "message_id": "stat-123e4567-e89b-12d3-a456-426614174001",
        "source_agent_id": "god-tier-builder",
        "target_agent_id": "bcbs-cascade-operator-v2.0",
        "message_type": "Status",
        "priority": 3,
        "timestamp": "2025-03-31T12:05:25Z",
        "correlation_id": "workflow-7890",
        "reply_to": "cmd-123e4567-e89b-12d3-a456-426614174000"
      },
      "body": {
        "content": {
          "status": "in_progress",
          "progress": 0.45,
          "current_step": "model_selection",
          "eta_seconds": 5,
          "message": "Evaluating optimal model for property PROP-AB12CD34"
        },
        "format": "JSON",
        "schema_version": "1.0.0",
        "encryption": {
          "enabled": false
        }
      },
      "metadata": {
        "tags": ["valuation", "progress"],
        "ttl": 30,
        "retry_count": 0,
        "trace_id": "trace-9876543210"
      }
    },
    "error_report_example": {
      "header": {
        "message_id": "err-123e4567-e89b-12d3-a456-426614174002",
        "source_agent_id": "god-tier-builder",
        "target_agent_id": "bcbs-cascade-operator-v2.0",
        "message_type": "Error",
        "priority": 1,
        "timestamp": "2025-03-31T12:05:27Z",
        "correlation_id": "workflow-7890",
        "reply_to": "cmd-123e4567-e89b-12d3-a456-426614174000"
      },
      "body": {
        "content": {
          "error_code": "MDL-001",
          "severity": "error",
          "message": "Failed to execute valuation for property PROP-AB12CD34",
          "details": {
            "reason": "Insufficient property data for accurate valuation",
            "missing_fields": ["square_feet", "year_built"],
            "stack_trace": "...",
            "recommendations": [
              "Provide missing property data",
              "Use default valuation method as fallback"
            ]
          }
        },
        "format": "JSON",
        "schema_version": "1.0.0",
        "encryption": {
          "enabled": false
        }
      },
      "metadata": {
        "tags": ["valuation", "error"],
        "ttl": 300,
        "retry_count": 0,
        "trace_id": "trace-9876543210"
      }
    },
    "calibration_data_example": {
      "header": {
        "message_id": "cal-123e4567-e89b-12d3-a456-426614174003",
        "source_agent_id": "god-tier-builder",
        "target_agent_id": "broadcast",
        "message_type": "Calibration",
        "priority": 2,
        "timestamp": "2025-03-31T12:30:00Z",
        "correlation_id": "calibration-12345"
      },
      "body": {
        "content": {
          "model_version": "enhanced_regression_v3.2.1",
          "training_metrics": {
            "r2_score": 0.873,
            "rmse": 15420.32,
            "mae": 12105.67,
            "cross_validation_scores": [0.867, 0.872, 0.878, 0.869, 0.879]
          },
          "feature_importance": {
            "bedrooms": 0.142,
            "bathrooms": 0.097,
            "square_feet": 0.326,
            "lot_size": 0.089,
            "year_built": 0.113,
            "neighborhood": 0.156,
            "latitude": 0.043,
            "longitude": 0.034
          },
          "calibration_timestamp": "2025-03-31T12:00:00Z",
          "calibration_properties": ["PROP-12345", "PROP-23456", "PROP-34567"],
          "hyperparameters": {
            "learning_rate": 0.05,
            "max_depth": 6,
            "num_leaves": 31,
            "n_estimators": 100
          }
        },
        "format": "JSON",
        "schema_version": "1.1.0",
        "encryption": {
          "enabled": false
        }
      },
      "metadata": {
        "tags": ["calibration", "model_update"],
        "ttl": 3600,
        "retry_count": 0,
        "trace_id": "trace-calibration-9876543210"
      }
    },
    "data_delivery_example": {
      "header": {
        "message_id": "data-123e4567-e89b-12d3-a456-426614174004",
        "source_agent_id": "bcbs-bootstrap-commander",
        "target_agent_id": "god-tier-builder",
        "message_type": "Data",
        "priority": 2,
        "timestamp": "2025-03-31T12:05:20Z",
        "correlation_id": "workflow-7890"
      },
      "body": {
        "content": {
          "property_data": {
            "property_id": "PROP-AB12CD34",
            "address": "123 Main St",
            "city": "Corvallis",
            "state": "OR",
            "zip_code": "97330",
            "neighborhood": "Downtown",
            "property_type": "single_family",
            "bedrooms": 3,
            "bathrooms": 2.5,
            "square_feet": 2100,
            "year_built": 1998,
            "lot_size": 0.25,
            "latitude": 44.5646,
            "longitude": -123.2620,
            "last_sale_date": "2023-06-15",
            "last_sale_price": 425000
          },
          "gis_features": {
            "near_water": 0.35,
            "near_park": 0.72,
            "near_school": 0.88,
            "near_shopping": 0.65,
            "neighborhood_quality": 0.78
          }
        },
        "format": "JSON",
        "schema_version": "1.0.0",
        "encryption": {
          "enabled": true,
          "algorithm": "AES-256-GCM",
          "key_id": "key-2025-03-production"
        }
      },
      "metadata": {
        "tags": ["property_data", "valuation_input"],
        "ttl": 60,
        "retry_count": 0,
        "trace_id": "trace-9876543210"
      }
    }
  },
  
  "logging_configuration": {
    "log_levels": ["debug", "info", "warning", "error", "critical"],
    "default_level": "info",
    "log_storage": {
      "retention_period_days": 90,
      "max_size_per_agent_mb": 500
    },
    "log_format": {
      "timestamp": "ISO-8601 UTC timestamp",
      "level": "Log level",
      "agent_id": "ID of the agent generating the log",
      "workflow_id": "Optional ID of the workflow context",
      "correlation_id": "Optional correlation ID for related events",
      "message": "Log message text",
      "context": "Additional contextual data specific to the log event"
    }
  },
  
  "security_configuration": {
    "authentication": {
      "method": "jwt",
      "key_rotation_interval_hours": 24,
      "required_claims": ["agent_id", "permissions", "exp"]
    },
    "authorization": {
      "permission_model": "role_based",
      "roles": {
        "orchestrator": ["read", "write", "command", "broadcast"],
        "worker": ["read", "write", "status"],
        "monitor": ["read"]
      }
    },
    "encryption": {
      "algorithms": {
        "symmetric": "AES-256-GCM",
        "asymmetric": "RSA-4096"
      },
      "key_management": {
        "storage": "secure_vault",
        "renewal_policy": "automatic",
        "renewal_period_days": 30
      }
    }
  },
  
  "performance_monitoring": {
    "metrics": {
      "message_throughput": {
        "description": "Messages processed per second",
        "unit": "messages/second",
        "alert_threshold": 90
      },
      "message_latency": {
        "description": "Average message processing time",
        "unit": "milliseconds",
        "alert_threshold": 500
      },
      "workflow_completion_rate": {
        "description": "Percentage of workflows completing successfully",
        "unit": "percentage",
        "alert_threshold": 95
      },
      "error_rate": {
        "description": "Error rate per 1000 operations",
        "unit": "errors/1000 ops",
        "alert_threshold": 5
      },
      "agent_availability": {
        "description": "Percentage of time agents are operational",
        "unit": "percentage",
        "alert_threshold": 99.9
      }
    },
    "sampling_interval": 60,
    "reporting_interval": 300,
    "retention_period_days": 90
  }
}