<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCBS Values - What-If Analysis</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            background-color: #f5f7fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: #0066cc;
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
        }

        nav ul {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        nav li {
            margin-left: 20px;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 3px;
            transition: background-color 0.3s;
        }

        nav a:hover {
            background-color: rgba(255,255,255,0.2);
        }

        .page-header {
            margin-bottom: 30px;
        }

        .widget {
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        .widget h2 {
            margin-top: 0;
            color: #0066cc;
            font-size: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
        }

        .parameter-controls {
            display: grid;
            gap: 15px;
        }

        .parameter-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        input[type="range"] {
            width: 100%;
        }

        .slider-values {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #777;
        }

        .value-display {
            text-align: right;
            font-weight: bold;
            color: #0066cc;
        }

        button {
            background-color: #0066cc;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
            margin-top: 10px;
            width: 100%;
        }

        button:hover {
            background-color: #0055aa;
        }

        .button-secondary {
            background-color: #6c757d;
        }

        .button-secondary:hover {
            background-color: #5a6268;
        }

        .chart-container {
            height: 300px;
            position: relative;
            margin-bottom: 20px;
        }

        .chart-placeholder {
            height: 100%;
            background-color: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            border: 1px dashed #ddd;
            border-radius: 4px;
        }

        .property-summary {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .property-detail {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
        }

        .property-detail h3 {
            margin-top: 0;
            font-size: 14px;
            color: #555;
        }

        .property-detail p {
            margin: 0;
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
        }

        .comparison-table th, .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .comparison-table th {
            background-color: #f8f9fa;
            color: #555;
            font-weight: bold;
        }

        .value-positive {
            color: #28a745;
        }

        .value-negative {
            color: #dc3545;
        }

        .value-neutral {
            color: #6c757d;
        }

        .factor-contribution {
            background-color: #f8f9fa;
            border-radius: 4px;
            padding: 15px;
            margin-top: 20px;
        }

        .factor-bar {
            height: 20px;
            background-color: #e9ecef;
            border-radius: 4px;
            margin-bottom: 10px;
            position: relative;
            overflow: hidden;
        }

        .factor-fill {
            height: 100%;
            background-color: #0066cc;
        }

        .factor-info {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #555;
        }

        footer {
            margin-top: 40px;
            padding: 20px 0;
            text-align: center;
            color: #6c757d;
            border-top: 1px solid #ddd;
        }

        @media (max-width: 768px) {
            .analysis-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">BCBS Values</div>
            <nav>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/dashboard.html">Dashboard</a></li>
                    <li><a href="/agent-dashboard.html">Agents</a></li>
                    <li><a href="/what-if-analysis.html">What-If Analysis</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="page-header">
            <h1>What-If Analysis Tool</h1>
            <p>Adjust valuation parameters to see their impact on property valuations.</p>
        </div>

        <div class="widget">
            <h2>Property Selection</h2>
            <div>
                <label for="property-id">Select Property</label>
                <select id="property-id" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option value="BC-1234">BC-1234: 123 Main St, Benton County (Residential)</option>
                    <option value="BC-1235">BC-1235: 456 Oak Ave, Benton County (Commercial)</option>
                    <option value="BC-1236">BC-1236: 789 Pine Rd, Benton County (Residential)</option>
                    <option value="BC-1237">BC-1237: 321 Elm St, Benton County (Residential)</option>
                    <option value="BC-1238">BC-1238: 654 Cedar Ln, Benton County (Industrial)</option>
                </select>
            </div>
            
            <div class="property-summary">
                <div class="property-detail">
                    <h3>Property Type</h3>
                    <p>Residential</p>
                </div>
                <div class="property-detail">
                    <h3>Square Footage</h3>
                    <p>2,450 sq ft</p>
                </div>
                <div class="property-detail">
                    <h3>Year Built</h3>
                    <p>1998</p>
                </div>
                <div class="property-detail">
                    <h3>Lot Size</h3>
                    <p>0.25 acres</p>
                </div>
                <div class="property-detail">
                    <h3>Bedrooms</h3>
                    <p>4</p>
                </div>
                <div class="property-detail">
                    <h3>Bathrooms</h3>
                    <p>2.5</p>
                </div>
                <div class="property-detail">
                    <h3>Original Valuation</h3>
                    <p>$425,000</p>
                </div>
                <div class="property-detail">
                    <h3>Confidence Score</h3>
                    <p>92%</p>
                </div>
            </div>
        </div>

        <div class="analysis-grid">
            <div class="widget">
                <h2>Valuation Parameters</h2>
                <p>Adjust the parameters below to see how they affect the property valuation.</p>
                
                <div class="parameter-controls">
                    <div class="parameter-group">
                        <label for="cap-rate">Capitalization Rate (%)</label>
                        <input type="range" id="cap-rate" min="3" max="12" step="0.1" value="5.5">
                        <div class="slider-values">
                            <span>3%</span>
                            <span class="value-display">5.5%</span>
                            <span>12%</span>
                        </div>
                    </div>

                    <div class="parameter-group">
                        <label for="market-growth">Market Growth Rate (%)</label>
                        <input type="range" id="market-growth" min="-5" max="15" step="0.5" value="4.2">
                        <div class="slider-values">
                            <span>-5%</span>
                            <span class="value-display">4.2%</span>
                            <span>15%</span>
                        </div>
                    </div>

                    <div class="parameter-group">
                        <label for="location-weight">Location Weight</label>
                        <input type="range" id="location-weight" min="0" max="2" step="0.1" value="1.2">
                        <div class="slider-values">
                            <span>0.0</span>
                            <span class="value-display">1.2</span>
                            <span>2.0</span>
                        </div>
                    </div>

                    <div class="parameter-group">
                        <label for="condition-weight">Property Condition Weight</label>
                        <input type="range" id="condition-weight" min="0" max="2" step="0.1" value="0.8">
                        <div class="slider-values">
                            <span>0.0</span>
                            <span class="value-display">0.8</span>
                            <span>2.0</span>
                        </div>
                    </div>

                    <div class="parameter-group">
                        <label for="amenities-weight">Amenities Weight</label>
                        <input type="range" id="amenities-weight" min="0" max="2" step="0.1" value="1.0">
                        <div class="slider-values">
                            <span>0.0</span>
                            <span class="value-display">1.0</span>
                            <span>2.0</span>
                        </div>
                    </div>

                    <div class="parameter-group">
                        <label for="risk-factor">Risk Factor</label>
                        <input type="range" id="risk-factor" min="0" max="1" step="0.05" value="0.15">
                        <div class="slider-values">
                            <span>0.0</span>
                            <span class="value-display">0.15</span>
                            <span>1.0</span>
                        </div>
                    </div>

                    <button id="calculate-btn">Recalculate Valuation</button>
                    <button id="reset-params" class="button-secondary">Reset Parameters</button>
                </div>
            </div>

            <div>
                <div class="widget">
                    <h2>Valuation Comparison</h2>
                    <div class="chart-container">
                        <div class="chart-placeholder">
                            Valuation Comparison Chart
                        </div>
                    </div>

                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Valuation Type</th>
                                <th>Value</th>
                                <th>Change</th>
                                <th>Confidence</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Original Valuation</td>
                                <td>$425,000</td>
                                <td>--</td>
                                <td>92%</td>
                            </tr>
                            <tr>
                                <td>Adjusted Valuation</td>
                                <td>$445,250</td>
                                <td class="value-positive">+$20,250 (+4.8%)</td>
                                <td>88%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="widget">
                    <h2>Factor Contribution Analysis</h2>
                    <p>This shows how each factor contributes to the adjusted valuation.</p>
                    
                    <div class="factor-contribution">
                        <h3>Location Factor</h3>
                        <div class="factor-bar">
                            <div class="factor-fill" style="width: 35%;"></div>
                        </div>
                        <div class="factor-info">
                            <span>Contribution: $155,837 (35%)</span>
                            <span>Weight: 1.2</span>
                        </div>
                    </div>
                    
                    <div class="factor-contribution">
                        <h3>Property Size/Layout</h3>
                        <div class="factor-bar">
                            <div class="factor-fill" style="width: 25%;"></div>
                        </div>
                        <div class="factor-info">
                            <span>Contribution: $111,313 (25%)</span>
                            <span>Weight: 1.0</span>
                        </div>
                    </div>
                    
                    <div class="factor-contribution">
                        <h3>Property Condition</h3>
                        <div class="factor-bar">
                            <div class="factor-fill" style="width: 20%;"></div>
                        </div>
                        <div class="factor-info">
                            <span>Contribution: $89,050 (20%)</span>
                            <span>Weight: 0.8</span>
                        </div>
                    </div>
                    
                    <div class="factor-contribution">
                        <h3>Amenities</h3>
                        <div class="factor-bar">
                            <div class="factor-fill" style="width: 15%;"></div>
                        </div>
                        <div class="factor-info">
                            <span>Contribution: $66,788 (15%)</span>
                            <span>Weight: 1.0</span>
                        </div>
                    </div>
                    
                    <div class="factor-contribution">
                        <h3>Market Trends</h3>
                        <div class="factor-bar">
                            <div class="factor-fill" style="width: 5%;"></div>
                        </div>
                        <div class="factor-info">
                            <span>Contribution: $22,263 (5%)</span>
                            <span>Growth: 4.2%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Benton County Building Services</p>
        <p>BCBS Values Platform - Real Estate Valuation System</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Update slider value displays
            const sliders = document.querySelectorAll('input[type="range"]');
            sliders.forEach(slider => {
                const valueDisplay = slider.nextElementSibling.querySelector('.value-display');
                slider.addEventListener('input', function() {
                    valueDisplay.textContent = this.value + (this.id === 'cap-rate' || this.id === 'market-growth' ? '%' : '');
                });
            });

            // Recalculate button
            const calculateBtn = document.getElementById('calculate-btn');
            calculateBtn.addEventListener('click', function() {
                console.log('Recalculating valuation with new parameters...');
                // In a real app, this would make an API call to get updated valuations
                
                // For demo purposes, generate a random adjustment
                const originalValue = 425000;
                const adjustment = Math.random() * 0.2 - 0.1; // -10% to +10%
                const newValue = Math.round(originalValue * (1 + adjustment));
                const changeAmount = newValue - originalValue;
                const changePercent = (changeAmount / originalValue * 100).toFixed(1);
                
                // Update the comparison table
                const comparisonTable = document.querySelector('.comparison-table tbody');
                comparisonTable.rows[1].cells[1].textContent = '$' + newValue.toLocaleString();
                
                const changeText = (changeAmount >= 0 ? '+' : '') + 
                                  '$' + Math.abs(changeAmount).toLocaleString() + 
                                  ' (' + (changeAmount >= 0 ? '+' : '-') + 
                                  Math.abs(changePercent) + '%)';
                
                comparisonTable.rows[1].cells[2].textContent = changeText;
                comparisonTable.rows[1].cells[2].className = changeAmount >= 0 ? 'value-positive' : 'value-negative';
                
                // Adjust confidence based on parameter changes
                const newConfidence = Math.round(92 - Math.abs(adjustment) * 40) + '%';
                comparisonTable.rows[1].cells[3].textContent = newConfidence;
                
                alert('Valuation recalculated. New value: $' + newValue.toLocaleString());
            });

            // Reset parameters button
            const resetBtn = document.getElementById('reset-params');
            resetBtn.addEventListener('click', function() {
                document.getElementById('cap-rate').value = 5.5;
                document.getElementById('market-growth').value = 4.2;
                document.getElementById('location-weight').value = 1.2;
                document.getElementById('condition-weight').value = 0.8;
                document.getElementById('amenities-weight').value = 1.0;
                document.getElementById('risk-factor').value = 0.15;
                
                // Update displayed values
                sliders.forEach(slider => {
                    const valueDisplay = slider.nextElementSibling.querySelector('.value-display');
                    valueDisplay.textContent = slider.value + (slider.id === 'cap-rate' || slider.id === 'market-growth' ? '%' : '');
                });
                
                console.log('Parameters reset to defaults');
            });

            // Property selection change
            const propertySelect = document.getElementById('property-id');
            propertySelect.addEventListener('change', function() {
                console.log('Selected property changed to', this.value);
                // In a real app, this would load the selected property's data
                alert('Property data would be loaded for ' + this.value);
            });
        });
    </script>
</body>
</html>