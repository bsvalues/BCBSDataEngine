{% extends 'base.html' %}

{% block title %}Property Valuation Tool{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-body">
                <h1 class="card-title">Property Valuation Tool</h1>
                <p class="card-text lead">
                    Enter property details below to estimate its market value using our advanced valuation model.
                </p>
            </div>
        </div>
    </div>
</div>

{% if error %}
<div class="row mb-4">
    <div class="col-12">
        <div class="alert alert-danger" role="alert">
            {{ error }}
        </div>
    </div>
</div>
{% endif %}

<div class="row">
    <div class="col-lg-8 col-md-10 mx-auto">
        <div class="card shadow">
            <div class="card-body">
                <form method="post" action="/valuation">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="square_feet" class="form-label">Square Feet</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="square_feet" name="square_feet" min="100" required placeholder="e.g. 1800">
                                <span class="input-group-text">sq ft</span>
                            </div>
                            <div class="form-text">Total finished area of the property</div>
                        </div>
                        
                        <div class="col-md-6">
                            <label for="year_built" class="form-label">Year Built</label>
                            <input type="number" class="form-control" id="year_built" name="year_built" min="1900" max="2025" required placeholder="e.g. 1995">
                            <div class="form-text">Year the property was constructed</div>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="bedrooms" class="form-label">Bedrooms</label>
                            <input type="number" class="form-control" id="bedrooms" name="bedrooms" min="0" step="1" required placeholder="e.g. 3">
                            <div class="form-text">Number of bedrooms</div>
                        </div>
                        
                        <div class="col-md-6">
                            <label for="bathrooms" class="form-label">Bathrooms</label>
                            <input type="number" class="form-control" id="bathrooms" name="bathrooms" min="0.5" step="0.5" required placeholder="e.g. 2.5">
                            <div class="form-text">Number of bathrooms (e.g. 2.5 for 2 full + 1 half bath)</div>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-12">
                            <label class="form-label">Additional Features</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="1" id="has_garage" name="has_garage">
                                <label class="form-check-label" for="has_garage">
                                    Garage
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="1" id="has_pool" name="has_pool">
                                <label class="form-check-label" for="has_pool">
                                    Swimming Pool
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="1" id="has_basement" name="has_basement">
                                <label class="form-check-label" for="has_basement">
                                    Finished Basement
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-12">
                            <button type="submit" class="btn btn-primary">Calculate Valuation</button>
                            <a href="/" class="btn btn-link">Cancel</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row mt-5">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-body">
                <h3 class="card-title">How Our Valuation Works</h3>
                <p>
                    Our property valuation system uses advanced machine learning techniques, including multiple regression analysis with feature engineering, to estimate property values based on key attributes.
                </p>
                
                <h5 class="mt-4">Key Factors in Our Valuation Model:</h5>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div class="feature-box border">
                            <h6>Square Footage (48% impact)</h6>
                            <p class="mb-0 small">The total living area is the most significant factor in determining a property's value.</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="feature-box border">
                            <h6>Bathrooms (24% impact)</h6>
                            <p class="mb-0 small">The number of bathrooms has a significant impact on property values.</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="feature-box border">
                            <h6>Bedrooms (18% impact)</h6>
                            <p class="mb-0 small">The number of bedrooms affects value, but with diminishing returns after 3-4 bedrooms.</p>
                        </div>
                    </div>
                </div>
                
                <p class="mt-3">
                    <strong>Note:</strong> Property valuations are estimates based on statistical models and available data. 
                    Actual market values may vary based on additional factors not captured in our model.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Form validation
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('form');
        
        form.addEventListener('submit', function(event) {
            let valid = true;
            
            // Square feet validation
            const squareFeet = document.getElementById('square_feet');
            if (squareFeet.value < 100 || squareFeet.value > 10000) {
                squareFeet.classList.add('is-invalid');
                valid = false;
            } else {
                squareFeet.classList.remove('is-invalid');
            }
            
            // Year built validation
            const yearBuilt = document.getElementById('year_built');
            if (yearBuilt.value < 1900 || yearBuilt.value > 2025) {
                yearBuilt.classList.add('is-invalid');
                valid = false;
            } else {
                yearBuilt.classList.remove('is-invalid');
            }
            
            if (!valid) {
                event.preventDefault();
            }
        });
    });
</script>
{% endblock %}