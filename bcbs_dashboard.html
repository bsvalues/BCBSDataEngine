<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BCBS Values - Property Dashboard</title>
  <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style>
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      padding: 20px;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .card {
      margin-bottom: 20px;
      transition: transform 0.2s;
    }
    
    .card:hover {
      transform: translateY(-5px);
    }
    
    .chart-container {
      height: 300px;
      margin-bottom: 20px;
    }
    
    table th {
      cursor: pointer;
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(0, 123, 255, 0.3);
      border-radius: 50%;
      border-top-color: #007bff;
      animation: spin 1s ease-in-out infinite;
      margin: 20px auto;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .progress-container {
      height: 10px;
      background-color: #e9ecef;
      border-radius: 5px;
      overflow: hidden;
      margin-bottom: 5px;
    }
    
    .progress-bar {
      height: 100%;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="mb-4">
      <div class="d-flex justify-content-between align-items-center">
        <h1>BCBS Values - Property Valuation Dashboard</h1>
        <div>
          <button class="btn btn-outline-secondary" id="refreshBtn">
            <i class="bi bi-arrow-clockwise"></i> Refresh Data
          </button>
        </div>
      </div>
      <p class="lead">Benton County Property Valuation Analytics</p>
    </header>
    
    <!-- Dashboard Metrics -->
    <div class="row mb-4">
      <div class="col-md-2">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Total Properties</h5>
            <h3 class="card-text">10</h3>
          </div>
        </div>
      </div>
      
      <div class="col-md-2">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Average Value</h5>
            <h3 class="card-text">$450,000</h3>
          </div>
        </div>
      </div>
      
      <div class="col-md-2">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Median Value</h5>
            <h3 class="card-text">$425,000</h3>
          </div>
        </div>
      </div>
      
      <div class="col-md-2">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Min Value</h5>
            <h3 class="card-text">$310,000</h3>
          </div>
        </div>
      </div>
      
      <div class="col-md-2">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Max Value</h5>
            <h3 class="card-text">$675,000</h3>
          </div>
        </div>
      </div>
      
      <div class="col-md-2">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Avg. Confidence</h5>
            <h3 class="card-text">87.5%</h3>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Charts Row -->
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header">
            Value Distribution
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="valueDistributionChart"></canvas>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-6">
        <div class="card">
          <div class="card-header">
            Neighborhood Comparison
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="neighborhoodChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Second Chart Row -->
    <div class="row mb-4">
      <div class="col-md-8">
        <div class="card">
          <div class="card-header">
            Model Performance Metrics
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="modelMetricsChart"></canvas>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-4">
        <div class="card">
          <div class="card-header">
            Valuation Model Distribution
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="modelDistributionChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Filters -->
    <div class="card mb-4">
      <div class="card-header">
        Filters & Search
      </div>
      <div class="card-body">
        <form id="filterForm">
          <div class="row">
            <div class="col-md-3 mb-3">
              <label for="searchInput" class="form-label">Search</label>
              <input type="text" class="form-control" id="searchInput" placeholder="Address or Property ID">
            </div>
            
            <div class="col-md-3 mb-3">
              <label for="neighborhoodSelect" class="form-label">Neighborhood</label>
              <select class="form-select" id="neighborhoodSelect">
                <option value="">All Neighborhoods</option>
                <option value="West Richland">West Richland</option>
                <option value="South Richland">South Richland</option>
                <option value="Kennewick">Kennewick</option>
                <option value="Pasco">Pasco</option>
                <option value="Central Richland">Central Richland</option>
                <option value="East Richland">East Richland</option>
                <option value="North Richland">North Richland</option>
              </select>
            </div>
            
            <div class="col-md-3 mb-3">
              <label for="minValueInput" class="form-label">Min Value</label>
              <input type="number" class="form-control" id="minValueInput" placeholder="300000">
            </div>
            
            <div class="col-md-3 mb-3">
              <label for="maxValueInput" class="form-label">Max Value</label>
              <input type="number" class="form-control" id="maxValueInput" placeholder="700000">
            </div>
          </div>
          
          <div class="d-flex justify-content-end">
            <button type="button" class="btn btn-outline-secondary me-2" id="resetFiltersBtn">Reset Filters</button>
            <button type="submit" class="btn btn-primary">Apply Filters</button>
          </div>
        </form>
      </div>
    </div>
    
    <!-- Properties Table -->
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <span>Property Listings</span>
        <div class="dropdown">
          <label for="itemsPerPage" class="me-2">Show:</label>
          <select class="form-select form-select-sm d-inline-block w-auto" id="itemsPerPage">
            <option value="5">5</option>
            <option value="10" selected>10</option>
            <option value="25">25</option>
          </select>
        </div>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col" data-sort="property_id">Property ID <i class="bi bi-arrow-down"></i></th>
                <th scope="col" data-sort="address">Address</th>
                <th scope="col" data-sort="estimated_value">Estimated Value</th>
                <th scope="col" data-sort="confidence_score">Confidence</th>
                <th scope="col" data-sort="valuation_date">Valuation Date</th>
                <th scope="col">Model</th>
              </tr>
            </thead>
            <tbody id="propertiesTableBody">
              <!-- Property rows will be populated here -->
              <tr>
                <td>BEN123456</td>
                <td>123 Main St, West Richland, WA 99353</td>
                <td>$425,000</td>
                <td>
                  <div class="progress-container">
                    <div class="progress-bar bg-success" style="width: 92%;"></div>
                  </div>
                  92%
                </td>
                <td>Mar 15, 2025</td>
                <td><span class="badge bg-success">advanced_regression</span></td>
              </tr>
              <tr>
                <td>BEN789012</td>
                <td>456 Oak Ave, South Richland, WA 99352</td>
                <td>$675,000</td>
                <td>
                  <div class="progress-container">
                    <div class="progress-bar bg-success" style="width: 88%;"></div>
                  </div>
                  88%
                </td>
                <td>Mar 14, 2025</td>
                <td><span class="badge bg-primary">multiple_regression</span></td>
              </tr>
              <tr>
                <td>BEN345678</td>
                <td>789 Pine St, Kennewick, WA 99336</td>
                <td>$380,000</td>
                <td>
                  <div class="progress-container">
                    <div class="progress-bar bg-success" style="width: 86%;"></div>
                  </div>
                  86%
                </td>
                <td>Mar 10, 2025</td>
                <td><span class="badge bg-success">advanced_regression</span></td>
              </tr>
              <tr>
                <td>BEN901234</td>
                <td>321 Elm St, Pasco, WA 99301</td>
                <td>$310,000</td>
                <td>
                  <div class="progress-container">
                    <div class="progress-bar bg-primary" style="width: 84%;"></div>
                  </div>
                  84%
                </td>
                <td>Mar 8, 2025</td>
                <td><span class="badge bg-secondary">basic_valuation</span></td>
              </tr>
              <tr>
                <td>BEN567890</td>
                <td>654 Maple Dr, Central Richland, WA 99354</td>
                <td>$495,000</td>
                <td>
                  <div class="progress-container">
                    <div class="progress-bar bg-success" style="width: 90%;"></div>
                  </div>
                  90%
                </td>
                <td>Mar 5, 2025</td>
                <td><span class="badge bg-success">advanced_regression</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <!-- Pagination -->
        <nav aria-label="Properties pagination" class="mt-4">
          <ul class="pagination justify-content-center">
            <li class="page-item disabled">
              <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
            </li>
            <li class="page-item active"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item">
              <a class="page-link" href="#">Next</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
    
    <!-- Property Details Modal -->
    <div class="modal fade" id="propertyDetailModal" tabindex="-1" aria-labelledby="propertyDetailModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="propertyDetailModalLabel">Property Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-md-6">
                <h6>Basic Information</h6>
                <div class="mb-3">
                  <span class="fw-bold">Property ID:</span>
                  <span id="modalPropertyId">BEN123456</span>
                </div>
                <div class="mb-3">
                  <span class="fw-bold">Address:</span>
                  <span id="modalAddress">123 Main St, West Richland, WA 99353</span>
                </div>
                <div class="mb-3">
                  <span class="fw-bold">Neighborhood:</span>
                  <span id="modalNeighborhood">West Richland</span>
                </div>
                <div class="mb-3">
                  <span class="fw-bold">Estimated Value:</span>
                  <span id="modalValue">$425,000</span>
                </div>
                <div class="mb-3">
                  <span class="fw-bold">Valuation Date:</span>
                  <span id="modalDate">Mar 15, 2025</span>
                </div>
                <div class="mb-3">
                  <span class="fw-bold">Model Used:</span>
                  <span id="modalModel">advanced_regression</span>
                </div>
                <div class="mb-3">
                  <span class="fw-bold">Confidence Score:</span>
                  <div class="progress-container">
                    <div class="progress-bar bg-success" id="modalConfidenceBar" style="width: 92%;"></div>
                  </div>
                  <span id="modalConfidence">92%</span>
                </div>
              </div>
              
              <div class="col-md-6">
                <h6>Property Features</h6>
                <div class="mb-3">
                  <span class="fw-bold">Square Feet:</span>
                  <span id="modalSqFt">2,400</span>
                </div>
                <div class="mb-3">
                  <span class="fw-bold">Bedrooms:</span>
                  <span id="modalBedrooms">4</span>
                </div>
                <div class="mb-3">
                  <span class="fw-bold">Bathrooms:</span>
                  <span id="modalBathrooms">2.5</span>
                </div>
                <div class="mb-3">
                  <span class="fw-bold">Year Built:</span>
                  <span id="modalYearBuilt">2005</span>
                </div>
                <div class="mb-3">
                  <span class="fw-bold">Lot Size:</span>
                  <span id="modalLotSize">8,500 sq ft</span>
                </div>
                
                <h6 class="mt-4">Model Metrics</h6>
                <div class="mb-3">
                  <span class="fw-bold">Adjusted R² Score:</span>
                  <span id="modalR2Score">0.89</span>
                </div>
                <div class="mb-3">
                  <span class="fw-bold">Location Quality:</span>
                  <span id="modalLocationQuality">0.85</span>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Bootstrap and Chart.js Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Sample property data
    const properties = [
      {
        property_id: "BEN123456",
        address: "123 Main St, West Richland, WA 99353",
        estimated_value: 425000,
        confidence_score: 0.92,
        model_used: "advanced_regression",
        valuation_date: "2025-03-15T14:30:00Z",
        features: {
          square_feet: 2400,
          bedrooms: 4,
          bathrooms: 2.5,
          year_built: 2005,
          lot_size: 8500
        },
        adj_r2_score: 0.89,
        location_quality: 0.85,
        neighborhood: "West Richland"
      },
      {
        property_id: "BEN789012",
        address: "456 Oak Ave, South Richland, WA 99352",
        estimated_value: 675000,
        confidence_score: 0.88,
        model_used: "multiple_regression",
        valuation_date: "2025-03-14T10:15:00Z",
        features: {
          square_feet: 3200,
          bedrooms: 5,
          bathrooms: 3,
          year_built: 2010,
          lot_size: 12000
        },
        adj_r2_score: 0.91,
        location_quality: 0.92,
        neighborhood: "South Richland"
      },
      {
        property_id: "BEN345678",
        address: "789 Pine St, Kennewick, WA 99336",
        estimated_value: 380000,
        confidence_score: 0.86,
        model_used: "advanced_regression",
        valuation_date: "2025-03-10T09:45:00Z",
        features: {
          square_feet: 1850,
          bedrooms: 3,
          bathrooms: 2,
          year_built: 1998,
          lot_size: 7500
        },
        adj_r2_score: 0.85,
        location_quality: 0.78,
        neighborhood: "Kennewick"
      },
      {
        property_id: "BEN901234",
        address: "321 Elm St, Pasco, WA 99301",
        estimated_value: 310000,
        confidence_score: 0.84,
        model_used: "basic_valuation",
        valuation_date: "2025-03-08T16:20:00Z",
        features: {
          square_feet: 1600,
          bedrooms: 3,
          bathrooms: 1.5,
          year_built: 1985,
          lot_size: 6000
        },
        adj_r2_score: 0.78,
        location_quality: 0.71,
        neighborhood: "Pasco"
      },
      {
        property_id: "BEN567890",
        address: "654 Maple Dr, Central Richland, WA 99354",
        estimated_value: 495000,
        confidence_score: 0.90,
        model_used: "advanced_regression",
        valuation_date: "2025-03-05T11:10:00Z",
        features: {
          square_feet: 2600,
          bedrooms: 4,
          bathrooms: 2.5,
          year_built: 2008,
          lot_size: 9000
        },
        adj_r2_score: 0.87,
        location_quality: 0.82,
        neighborhood: "Central Richland"
      }
    ];
    
    // Initialize charts
    document.addEventListener('DOMContentLoaded', function() {
      // Value Distribution Chart
      const valueDistributionCtx = document.getElementById('valueDistributionChart').getContext('2d');
      const valueDistributionChart = new Chart(valueDistributionCtx, {
        type: 'bar',
        data: {
          labels: ['300k-400k', '400k-500k', '500k-600k', '600k-700k'],
          datasets: [{
            label: 'Number of Properties',
            data: [2, 2, 1, 0],
            backgroundColor: 'rgba(54, 162, 235, 0.5)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1
          }]
        },
        options: {
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Number of Properties'
              }
            },
            x: {
              title: {
                display: true,
                text: 'Price Range'
              }
            }
          }
        }
      });
      
      // Neighborhood Chart
      const neighborhoodCtx = document.getElementById('neighborhoodChart').getContext('2d');
      const neighborhoodChart = new Chart(neighborhoodCtx, {
        type: 'bar',
        data: {
          labels: ['West Richland', 'South Richland', 'Kennewick', 'Pasco', 'Central Richland'],
          datasets: [{
            label: 'Average Property Value',
            data: [425000, 675000, 380000, 310000, 495000],
            backgroundColor: 'rgba(75, 192, 192, 0.5)',
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 1
          }]
        },
        options: {
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Average Value ($)'
              }
            },
            x: {
              title: {
                display: true,
                text: 'Neighborhood'
              }
            }
          }
        }
      });
      
      // Model Metrics Chart
      const modelMetricsCtx = document.getElementById('modelMetricsChart').getContext('2d');
      const modelMetricsChart = new Chart(modelMetricsCtx, {
        type: 'radar',
        data: {
          labels: [
            'Accuracy',
            'Precision',
            'Recall',
            'F1 Score',
            'R² Score',
            'MAPE'
          ],
          datasets: [{
            label: 'Advanced Regression',
            data: [0.92, 0.89, 0.94, 0.91, 0.88, 0.85],
            backgroundColor: 'rgba(54, 162, 235, 0.2)',
            borderColor: 'rgb(54, 162, 235)',
            pointBackgroundColor: 'rgb(54, 162, 235)',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: 'rgb(54, 162, 235)'
          }, {
            label: 'Basic Valuation',
            data: [0.78, 0.75, 0.80, 0.77, 0.74, 0.72],
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgb(255, 99, 132)',
            pointBackgroundColor: 'rgb(255, 99, 132)',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: 'rgb(255, 99, 132)'
          }]
        },
        options: {
          maintainAspectRatio: false,
          elements: {
            line: {
              borderWidth: 3
            }
          },
          scales: {
            r: {
              angleLines: {
                display: true
              },
              suggestedMin: 0,
              suggestedMax: 1
            }
          }
        }
      });
      
      // Model Distribution Chart
      const modelDistributionCtx = document.getElementById('modelDistributionChart').getContext('2d');
      const modelDistributionChart = new Chart(modelDistributionCtx, {
        type: 'pie',
        data: {
          labels: [
            'Advanced Regression',
            'Multiple Regression',
            'Basic Valuation'
          ],
          datasets: [{
            label: 'Models Used',
            data: [60, 20, 20],
            backgroundColor: [
              'rgb(54, 162, 235)',
              'rgb(75, 192, 192)',
              'rgb(255, 99, 132)'
            ],
            hoverOffset: 4
          }]
        },
        options: {
          maintainAspectRatio: false
        }
      });
      
      // Initialize property row click handlers
      const propertyRows = document.querySelectorAll('#propertiesTableBody tr');
      propertyRows.forEach(row => {
        row.addEventListener('click', () => {
          // In a real application, we would populate this with actual data
          // For now, just show the modal
          const propertyModal = new bootstrap.Modal(document.getElementById('propertyDetailModal'));
          propertyModal.show();
        });
      });
      
      // Reset filters button
      document.getElementById('resetFiltersBtn').addEventListener('click', () => {
        document.getElementById('filterForm').reset();
      });
    });
  </script>
</body>
</html>